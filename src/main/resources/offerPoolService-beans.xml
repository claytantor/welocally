<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop
           http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.1.xsd">
	
	<bean id="offerPoolService" 
		class="com.sightlyinc.ratecred.service.DefaultOfferPoolService"
		init-method="refresh">
		<property name="clients">
			<list>
			  <ref bean="comissionJunctionOfferClient"/>
			  <ref bean="ratecredOfferClient"/>
			</list>
		</property>	
		<property name="fetchDisabled" value="${offerPoolService.fetchDisabled}"/>						
	</bean>
	
	<bean id="pepperJamOfferClient" 
		class="com.sightlyinc.ratecred.client.offers.PepperJamOfferClient">
		<property name="protocol" value="http"/>
		<property name="port" value="80"/>
		<property name="host" value="feeds.pepperjamnetwork.com"/>
		<property name="endpoint" value="/coupon/download/?affiliate_id=59161&amp;program_ids=259-1687-1801-2110-2708-2803-3456-4750-4826-5173"/>
		<property name="sourceName" value="PEPPERJAM"/>
	</bean>
	
	<!-- http://media.ratecred.com.s3.amazonaws.com/dev/data/ratecred-offers.csv -->
	<bean id="ratecredOfferClient" 
		class="com.sightlyinc.ratecred.client.offers.RatecredOfferClient">
		<property name="protocol" value="http"/>
		<property name="port" value="80"/>
		<property name="host" value="media.ratecred.com.s3.amazonaws.com"/>
		<property name="endpoint" value="${ratecredOfferClient.endpoint}"/>
		<property name="sourceName" value="RATECRED"/>
	</bean>	
	
	<bean id="comissionJunctionOfferClient" 
		class="com.sightlyinc.ratecred.client.offers.ComissionJunctionOfferClient">
		<property name="sourceName" value="CJ"/>
		<property name="webLinksRequest"><ref bean="offerLinksRequestModel"/></property>
		<property name="linkClient"><ref bean="linkClient"/></property>
	</bean>
		
	<bean id="offerLinksRequestModel" 
		class="com.sightlyinc.ratecred.client.link.LinkClientRequest">
		<property name="linkRequestModel">
			<map> 
		        <entry> 
		            <key> 
		                <value>advertiser-ids</value>
		            </key> 
		            <value>${offerlinkClient.advertiserIds}</value> 
		        </entry>			
		        <entry> 
		            <key> 
		                <value>website-id</value>
		            </key> 
		            <value>${offerlinkClient.websiteId}</value> 
		        </entry> 
		        <entry> 
		            <key> 
		                <value>link-type</value>
		            </key> 
		            <value>${offerlinkClient.linkType}</value> 
		        </entry> 
		        <entry> 
		            <key> 
		                <value>promotion-type</value>
		            </key> 
		            <value>${offerlinkClient.promotionType}</value> 
		        </entry>		        
		        <entry> 
		            <key> 
		                <value>records-per-page</value>
		            </key> 
		            <value>${offerlinkClient.pageSize}</value> 
		        </entry> 		        
		   </map>		
		</property>
	</bean>	

</beans>